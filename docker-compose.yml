services:
  api:
    build:
      context: .
      args:
        INSTALL_DIARIZATION: ${INSTALL_DIARIZATION:-false}
    image: video-transcriber:latest
    container_name: video-transcriber-api
    ports:
      - "${HOST_PORT:-8001}:8000"
    environment:
      HF_TOKEN: ${HF_TOKEN:-}
      OLLAMA_BASE_URL: ${OLLAMA_BASE_URL:-http://host.docker.internal:11434}
      OLLAMA_MODEL: ${OLLAMA_MODEL:-llama3.1:8b}
      OLLAMA_TIMEOUT_SECONDS: ${OLLAMA_TIMEOUT_SECONDS:-600}
      OLLAMA_REQUIRED: ${OLLAMA_REQUIRED:-true}
    extra_hosts:
      - "host.docker.internal:host-gateway"
